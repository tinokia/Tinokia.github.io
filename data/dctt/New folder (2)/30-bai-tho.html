<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tra c·ª©u v·∫≠n th∆°</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    label, select, input, button {margin: 10px 0; font-size: 16px; }
    #result { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h3 { color: darkblue; }
	.inline { display: flex; align-items: center; gap: 10px; }
	#result1 { font-size: 18px; color: darkblue;}
	#tuoi {
  width: 60px;
}
  </style>
</head>
<body>
  <h2>Tra c·ª©u v·∫≠n th∆° - Di·ªÖn C·∫ßm Tam Th·∫ø</h2>
  
  <label>Ch·ªçn ph·∫ßn xem: 
    <select id="xemTheo">
      <option value="">----</option>
      <option value="nam">Xem theo NƒÉm</option>
      <option value="thang">Xem theo Th√°ng</option>
      <option value="ngay">Xem theo Ng√†y</option>
    </select>
  </label>&nbsp;&nbsp;

  <label>Ch·ªçn gi·ªõi t√≠nh:
    <select id="gioiTinh">
      <option value="">----</option>
      <option value="nam">Nam</option>
      <option value="nu">N·ªØ</option>
    </select>
  </label>&nbsp;&nbsp;

  <label>Thi√™n can:
    <select id="thienCan">
      <option value="">----</option>
      <option>Gi√°p</option><option>·∫§t</option><option>B√≠nh</option><option>ƒêinh</option><option>M·∫≠u</option>
      <option>K·ª∑</option><option>Canh</option><option>T√¢n</option><option>Nh√¢m</option><option>Qu√Ω</option>
    </select>
  </label>&nbsp;&nbsp;

  <label>ƒê·ªãa chi:
    <select id="diaChi">
      <option value="">----</option>
      <option>T√Ω</option><option>S·ª≠u</option><option>D·∫ßn</option><option>M·∫πo</option><option>Th√¨n</option>
      <option>T·ªµ</option><option>Ng·ªç</option><option>M√πi</option><option>Th√¢n</option><option>D·∫≠u</option>
      <option>Tu·∫•t</option><option>H·ª£i</option>
    </select>
  </label>&nbsp;&nbsp;

  

  <label>Nh·∫≠p s·ªë tu·ªïi: <input type="number" id="tuoi"> </label>&nbsp;&nbsp;

  <label>Ng√†y ƒë·ªãa chi:
    <select id="ngayDiaChi">
      <option value="">----</option>
      <option>T√Ω</option><option>S·ª≠u</option><option>D·∫ßn</option><option>M·∫πo</option><option>Th√¨n</option>
      <option>T·ªµ</option><option>Ng·ªç</option><option>M√πi</option><option>Th√¢n</option><option>D·∫≠u</option>
      <option>Tu·∫•t</option><option>H·ª£i</option>
    </select>
  </label>
	
<label class="inline">
    <button onclick="traChi()">Xem Ng√†y ƒê·ªãa Chi</button>
    <div id="result1"></div>
  </label>
	
  <button onclick="traCuu()">Tra c·ª©u</button>
  <div id="result"></div>

<script src="giapty.js" language="javascript"></script>	
<script>// <strong>K·ªµ:</strong>
function traCuu() {
  const xemTheo = document.getElementById('xemTheo').value;
  const gioiTinh = document.getElementById('gioiTinh').value;
  const thienCan = document.getElementById('thienCan').value;
  const diaChi = document.getElementById('diaChi').value;
  const tuoi = parseInt(document.getElementById('tuoi').value);
  const ngayDiaChi = document.getElementById('ngayDiaChi').value;

  const nam = `${thienCan} ${diaChi}`;
  const duLieu = duLieuNam[nam];
  let ketQua = '';

  if (!thienCan || !diaChi) {
    document.getElementById('result').innerHTML = `<p>‚ö†Ô∏è Vui l√≤ng ch·ªçn ƒë·ªß Thi√™n can v√† ƒê·ªãa chi.</p>`;
    return;
  }

  if (!duLieu) {
    document.getElementById('result').innerHTML = `<p>‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu cho nƒÉm ${nam}.</p>`;
    return;
  }

  // === XEM THEO NƒÇM ===
  if (xemTheo === 'nam') {
    if (!gioiTinh || isNaN(tuoi)) {
      document.getElementById('result').innerHTML = `<p>‚ö†Ô∏è Vui l√≤ng nh·∫≠p gi·ªõi t√≠nh v√† tu·ªïi ƒë·ªÉ xem nƒÉm.</p>`;
      return;
    }

    const thangPhuHop = Object.entries(duLieu.thang || {}).find(([thang, data]) => {
      return gioiTinh === 'nam'
        ? data.tuoiNam.includes(tuoi)
        : data.tuoiNu.includes(tuoi);
    });

    const baiThoNam = `üîÆ <b>NƒÉm ${nam}:</b><br>${duLieu.thoNam}`;

    if (thangPhuHop) {
      const [thangTimThay, data] = thangPhuHop;
      ketQua = baiThoNam + `<br><br>üìò <b>Th√°ng t∆∞∆°ng ·ª©ng (th√°ng ${thangTimThay}):</b><br>${data.tho}`;
    } else {
      ketQua = baiThoNam + `<br><br>üìò <i>Kh√¥ng t√¨m th·∫•y th√°ng ph√π h·ª£p v·ªõi tu·ªïi ƒë√£ nh·∫≠p.</i>`;
    }
  }

  // === XEM THEO TH√ÅNG ===
else if (xemTheo === 'thang') {
  if (!gioiTinh || isNaN(tuoi)) {
    document.getElementById('result').innerHTML = `<p>‚ö†Ô∏è Vui l√≤ng nh·∫≠p gi·ªõi t√≠nh v√† tu·ªïi ƒë·ªÉ xem th√°ng.</p>`;
    return;
  }

  const thangPhuHop = Object.entries(duLieu.thang || {}).find(([thang, data]) => {
    return gioiTinh === 'nam'
      ? data.tuoiNam.includes(tuoi)
      : data.tuoiNu.includes(tuoi);
  });

  if (thangPhuHop) {
    const [thangTimThay, data] = thangPhuHop;
    ketQua = `üìò <b>Th√°ng t∆∞∆°ng ·ª©ng (th√°ng ${thangTimThay}):</b><br>${data.tho}`;
  } else {
    ketQua = `<p>üìò <i>Kh√¥ng t√¨m th·∫•y th√°ng ph√π h·ª£p v·ªõi tu·ªïi v√† gi·ªõi t√≠nh ƒë√£ nh·∫≠p.</i></p>`;
  }
}


  // === XEM THEO NG√ÄY ===
  else if (xemTheo === 'ngay') {
    if (!ngayDiaChi) {
      document.getElementById('result').innerHTML = `<p>‚ö†Ô∏è Vui l√≤ng ch·ªçn ng√†y ƒë·ªãa chi.</p>`;
      return;
    }

    const dataNgay = duLieu.ngay[ngayDiaChi];
    if (dataNgay) {
      ketQua = `üìÖ <b>K·ªµ/H·∫°p ng√†y ${ngayDiaChi}:</b><br> ${dataNgay}<br><br><i>(ƒêi·ªÅu k·ªµ, h·∫°p ƒë√∫ng ng√†y, ph√≤ng h·ªù tr∆∞·ªõc sau 1 ng√†y)</i>`;
    } else {
      ketQua = `‚ùå Kh√¥ng c√≥ d·ªØ li·ªáu cho ng√†y ${ngayDiaChi}`;
    }
  } else {
    ketQua = `<p>‚ö†Ô∏è Vui l√≤ng ch·ªçn ph·∫ßn c·∫ßn xem (NƒÉm, Th√°ng ho·∫∑c Ng√†y).</p>`;
  }

  document.getElementById('result').innerHTML = `<div>${ketQua}</div>`;
}

</script>
<script>
    const CHI = ["T√Ω", "S·ª≠u", "D·∫ßn", "M√£o", "Th√¨n", "T·ªµ", "Ng·ªç", "M√πi", "Th√¢n", "D·∫≠u", "Tu·∫•t", "H·ª£i"];

    function jdFromDate(dd, mm, yy) {
      let a = Math.floor((14 - mm) / 12);
      let y = yy + 4800 - a;
      let m = mm + 12 * a - 3;
      let jd = dd + Math.floor((153 * m + 2) / 5) + 365 * y;
      jd += Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045;
      return jd;
    }

    function traChi() {
      let today = new Date();
      let dd = today.getDate();
      let mm = today.getMonth() + 1;
      let yy = today.getFullYear();

      let jd = jdFromDate(dd, mm, yy);
      let chi = CHI[(jd + 1) % 12];

      document.getElementById("result1").innerText = `H√¥m nay l√† ng√†y ${chi}`;
    }
  </script>

</body>
</html>
